lowercaseOutputName: true
lowercaseOutputLabelNames: true
rules:
  # Kafka Producer Metrics
  - pattern: 'kafka.producer<type=producer-metrics, client-id=(.+)><>(.+):'
    name: kafka_producer_$2
    labels:
      clientId: "$1"
    type: GAUGE
    help: "Kafka producer metric $2"

  # Kafka Producer Topic Metrics
  - pattern: 'kafka.producer<type=producer-topic-metrics, client-id=(.+), topic=(.+)><>(.+):'
    name: kafka_producer_topic_$3
    labels:
      clientId: "$1"
      topic: "$2"
    type: GAUGE
    help: "Kafka producer topic metric $3"

  # JVM Metrics for Memory and GC
  - pattern: 'java.lang<type=Memory><HeapMemoryUsage>(used|committed|max)'
    name: java_lang_memory_heap_$1
    type: GAUGE
    help: 'JVM Memory Usage in the Heap'

  - pattern: 'java.lang<type=GarbageCollector, name=(.+)><>CollectionCount'
    name: java_lang_gc_collection_count
    labels:
      gcName: "$1"
    type: COUNTER
    help: "Total number of collections that have occurred"

  - pattern: 'java.lang<type=GarbageCollector, name=(.+)><>CollectionTime'
    name: java_lang_gc_collection_time
    labels:
      gcName: "$1"
    type: COUNTER
    help: "Approximate accumulated collection elapsed time"
